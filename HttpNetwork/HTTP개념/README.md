## HTTP
### HTTP 개념
- HTTP(HyperText Transfer Protocol)는 HTML 문서와 같은 파일(이미지 파일, 소스코드 파일 등, 리소스)들을 가져올 수 있도록 해주는 프로토콜
- 클라이언트-서버 프로토콜이라고도 함
    - 메시지 요청(request) : 브라우저인 클라이언트가 서버에게 리소스를 요청하는 것
    - 메시지 응답(response) : 클라이언트가 원하는 리소스를 첨부하여 응답하는 것

![image](https://user-images.githubusercontent.com/33227831/218357815-b5686bc6-2612-44f5-a93b-47ae847ae118.png)

위 그림은 애플리케이션 게층의 프로토콜인 HTTP 위에 웹 서버가 있고 웹 서버에는 HTML, CSS, Web APIs들이 있습니다.

클라이언트가 서버에 HTTP를 통해 응답하면 서버는 자신이 가지고 있는 리소스를 HTTP를 통해 응답합니다.

HTTP는 TCP 또는 TSL(암호화된 TCP 연결)을 통해 전송됩니다.

### HTTP 기반 시스템 구성요소
- 클라이언트
    - 서버에게 리소스 요청을 보내는 개체, 리소스(HTML, CSS) 등을 요청하여 웹 페이지를 표시함
    - 주로 브라우저에 해당함
- 웹 서버
    - 클라이언트에게 리소스 요청에 따른 응답을 하는 개체
    - 웹 서버는 논리적으로는 한 개지만 물리적으로는 여러개 일 수 있음
    - HTTP/1.1과 Host 헤더를 이용하여 동일한 IP 주소를 공유할 수 있음
- 프록시
    - 빠른 접근이나 안전한 통신 등을 확보하기 위한 **중계 서버**
    - 캐싱, 필터링, 로드 밸런싱, 인증, 로깅과 같은 기능들을 제공함

### HTTP 특징
#### 비연결성(Connectionless)
비연결성은 클라이언트와 서버가 한번 연결을 맺은 후, 클라이언트 요청에 대해 서버가 응답을 마치면
맺었던 연결을 끊어버리는 것을 말합니다.

1) 비연결성 장점
- **연결을 유지하기 위한 리소스를 줄이면 더 많은 연결을 할 수 있음**
    - 서버에서 여러 클라이언트와 연결을 계속 유지하게 된다면 리소스가 많이 발생하기 때문

2) 비연결성 단점
- 클라이언트와 서버간의 연결/해제에 대한 오버헤드가 발생함
    - **서버는 클라이언트를 기억하지 못하므로 똑같은 클라이언트의 모든 요청에 대해서 매번 새로운 연결을 하고 해제하는 과정을 거쳐야함**

3) KeepAlive
- 비연결성의 단점인 오버헤드를 줄이기 위해 HTTP의 KeepAlive 속성을 사용할 수 있음
- KeepAlive는 특정한 시간 동안 서버와 클라이언트 사이에 패킷 교환이 없는 경우,
  상대방의 안부를 묻기 위해 패킷을 주기적으로 보내는 것을 의미합니다. 패킷에 반응이 없는 접속을 끊게 됩니다.
- KeepAlive는 완벽한 해결책이 아님
    - KeepAlive로 상태를 유지하기 위한 메모리를 많이 사용하게 되기 때문

#### 무상태(Stateless)
1) 무상태 개념
   비연결성으로 인한여 서버가 각각의 클라이언트를 식별할 수 없는 것을 의미합니다.

예를 들어 쇼핑몰에 접속한다면 로그인하고 마이페이지로 이동하고 다른 페이지로 이동시 다시 로그인을 요구하게 됩니다.

이와 같이 서버가 클라이언트를 식별할 수 없기 때문에 계속 인증을 요구받게 됩니다.

2) 상태를 기억하는 방법 - 쿠키
   서버가 클라이언트를 식별할 수 있도록 HTTP 헤더에 쿠키를 설정하여 식별할 수 있도록 합니다.

3) 상태를 기억하는 방법 - 세션
   쿠키는 사용자 정보가 브라우저에 저장되기 때문에 위변조 가능성이 높습니다.

세션은 브라우저가 아닌 서버에서 사용자 정보를 저장하는 구조입니다.

하지만 세션도 중간에 탈취 당할 수 있기 때문에 완벽하지는 않습니다.

4) 상태를 기억하는 방법 - 토큰을 사용하는 OAuth, JWT
   토큰 방식은 보호할 데이터를 토큰으로 치환하여 원본 데이터 대신 토큰을 사용하는 기술입니다.

중간에 토큰이 탈취당하더라도 데이터에 대한 정보를 알 수 없습니다.